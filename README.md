# BobEUM

<div>
<p align="center"><img src="4th_team_logo.png" width= "300" height="300"/>
  
</div>

&nbsp;
<div align=center>
	
###  4íŒ€ - NOISE_CAN 
</div>  

## ëª©ì°¨


1. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
2. [íŒ€ì›](#íŒ€ì›)
3. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)  
   3.1. [ì†Œê°œ](#ì†Œê°œ)     
   3.2.[WBS](#wbs)  
   3.3.[ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ](#ìš”êµ¬ì‚¬í•­-ëª…ì„¸ì„œ)    
4. [ğŸ“Œ SCHEMA](#-schema)  
   4.1. [MEMBER](#1-member)    
   4.2. [STORES](#2-stores)   
   4.3. [ORDERS](#3-orders)  
5. [âœï¸ DML](#-dml)  
   5.1. [MEMBER](#1-member-1)  
   5.2. [MENU](#2-menu)  
   5.3. [STORES](#3-stores)  
6. [ğŸ§· í”„ë¡œì‹œì €ì™€ íŠ¸ë¦¬ê±°](#-í”„ë¡œì‹œì €ì™€-íŠ¸ë¦¬ê±°)  
   6.1. [PROCEDURE](#procedure)  
   6.2. [TRIGGER](#trigger)

	



## ê¸°ìˆ  ìŠ¤íƒ
![MariaDB](https://img.shields.io/badge/MariaDB-003545?style=for-the-badge&logo=mariadb&logoColor=white)
![Ubuntu](https://img.shields.io/badge/ubuntu-E95420?style=for-the-badge&logo=ubuntu&logoColor=FFFFFF)
![Prometheus](https://img.shields.io/badge/Prometheus-E6522C?style=for-the-badge&logo=Prometheus&logoColor=white)
![Grafana](https://img.shields.io/badge/grafana-%23F46800.svg?style=for-the-badge&logo=grafana&logoColor=white)
## íŒ€ì›
<div>

|   <img src="1000011301.jpg" width="200" height="200"/>         |   <img src="1000011302.jpg" width="200" height="200"/>   | <img src="1000011303.jpg" width="200" height="200"/>  |  <img src="1000011304.jpg" width="200" height="200"/>  |
| :------------------------------------------------------------: | :--------------------------------------------------------: | :--------------------------------------------------------: | :------------------------------------------------------: |
|  **ìµœê±´**<br/>[@gjaku1031](https://github.com/gjaku1031)       |  **ì´ë•ì°¬**<br/>[@deokChan2](https://github.com/deokChan2) |  **ì„í˜„ì¡°**<br/>[@limhyunjo](https://github.com/limhyunjo) |  **í™ë„í˜„**<br/>[@dh0522](https://github.com/dh0522) |

</div>
<br>

## í”„ë¡œì íŠ¸ ê°œìš”

### ì†Œê°œ
<p align="center"><img src="delivery.png" width="500" height="400"/>
<div>
ìµœê·¼ ì½”ë¡œë‚˜19 íŒ¬ë°ë¯¹ ì´í›„ ë°°ë‹¬ ì„œë¹„ìŠ¤ì˜ ìˆ˜ìš”ê°€ í¬ê²Œ ì¦ê°€í•˜ì˜€ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ì™€ í•¨ê»˜ ë°°ë‹¬ ì•± ì—…ì²´ë“¤ì˜ ë†’ì€ ìˆ˜ìˆ˜ë£Œ ë¶€ê³¼ë¡œ ì¸í•´ ì†Œë¹„ìì™€ ê°€ê²Œ ëª¨ë‘ì—ê²Œ ë¶€ë‹´ì´ ê°€ì¤‘ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì†Œë¹„ìë“¤ì€ ë°°ë‹¬ ìˆ˜ìˆ˜ë£Œ ìƒìŠ¹ìœ¼ë¡œ ì¸í•œ ê²½ì œì  ë¶€ë‹´ì„ ê²ªê³  ìˆìœ¼ë©°, ì¼ë¶€ ê°€ê²Œë“¤ì€ ì´ì¤‘ ê°€ê²©ì œë¥¼ ë„ì…í•˜ëŠ” ë“± ìƒˆë¡œìš´ ëŒ€ì‘ ë°©ì•ˆì„ ëª¨ìƒ‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.   
</br>
</br>

ì´ëŸ¬í•œ ë°°ë‹¬ ì„œë¹„ìŠ¤ì˜ í˜„ì•ˆì„ í•´ê²°í•˜ê¸° ìœ„í•´, ì €í¬ëŠ” ì§€ì—­ ì»¤ë®¤ë‹ˆí‹°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìƒˆë¡œìš´ ì•± ì„œë¹„ìŠ¤ì¸ `ë°¥ì´ìŒ`ì„ ì œì•ˆí•©ë‹ˆë‹¤.
</br> 

`ë°¥ì´ìŒ`ì€ ë‹¹ê·¼ ë§ˆì¼“ê³¼ ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ ì§€ì—­ ì£¼ë¯¼ë“¤ì´ ëª¨ì—¬ ê³µë™ ì£¼ë¬¸ì„ í•  ìˆ˜ ìˆëŠ” ì±„íŒ…ë°© ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì±„íŒ…ë°© ë‚´ì—ì„œ ì‚¬ìš©ìë“¤ì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ëŒ€í™”ë¥¼ ë‚˜ëˆ„ë©° ì„ í˜¸í•˜ëŠ” ë©”ë‰´ì™€ ê°€ê²Œë¥¼ ê²°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ê°œë³„ì ìœ¼ë¡œ ì£¼ë¬¸í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•¨ê»˜ ëª¨ì•„ ì£¼ë¬¸í•¨ìœ¼ë¡œì¨ ë°°ë‹¬ë£Œë¥¼ ì ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

</div>


</br>

## ğŸ“† WBS

<div>



[WBS](https://github.com/beyond-sw-camp/be13-1st-bab_eum/blob/main/WBS%204%E1%84%8C%E1%85%A9.pdf)
  


</div>

<div>
</br>

## ğŸ“ƒ ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ

    
[ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ](https://github.com/beyond-sw-camp/be13-1st-bab_eum/blob/main/%E1%84%8B%E1%85%AD%E1%84%80%E1%85%AE%E1%84%89%E1%85%A1%E1%84%92%E1%85%A1%E1%86%BC%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%E1%84%89%E1%85%A5.pdf)


</div>

</br>

## ğŸ“ˆ ERD 
<img src="ERD.png" width="800" height="600"/>

## ğŸ“Œ SCHEMA 
### 1. MEMBER
```sql
CREATE TABLE `member` (
	`member_no` INT(11) NOT NULL AUTO_INCREMENT,
	`member_code` CHAR(1) NOT NULL DEFAULT '1',
	`email` VARCHAR(100) NOT NULL ,
	`password` VARCHAR(100) NOT NULL ,
	`name` VARCHAR(100) NOT NULL ,
	`nickname` VARCHAR(100) NOT NULL ,
	`identity_no` VARCHAR(20) NOT NULL ,
	`phone` VARCHAR(20) NOT NULL ,
	`profile_img` VARCHAR(900) NULL DEFAULT NULL,
	`address` VARCHAR(1000) NOT NULL ,
	`enroll_date` DATE NOT NULL DEFAULT curdate(),
	`manner_total_score` INT(11) NOT NULL DEFAULT '25' ,
	`status` CHAR(1) NOT NULL DEFAULT 'N' ,
	`member_flag` TINYINT(4) NOT NULL DEFAULT '0' ,
	PRIMARY KEY (`member_no`) USING BTREE,
	CONSTRAINT `CONSTRAINT_1` CHECK (`status` in ('Y','N')),s
	CONSTRAINT `CONSTRAINT_2` CHECK (`member_code` in ('1','2','3')),
	CONSTRAINT `CONSTRAINT_3` CHECK (`status` in ('Y','N')),
	CONSTRAINT `CONSTRAINT_4` CHECK (`member_code` in ('1','2','3'))
);
```

### 2. STORES
```sql
CREATE TABLE `stores` (
	`store_no` INT(11) NOT NULL AUTO_INCREMENT,
	`store_name` VARCHAR(150) NOT NULL,
	`store_address` VARCHAR(1000) NOT NULL ,
	`phone` VARCHAR(20) NOT NULL ,
	`store_info` VARCHAR(3000) NULL DEFAULT NULL,
	`store_img` VARCHAR(1000) NOT NULL ,
	`min_delivery_price` INT(11) NOT NULL,
	`delivery_charge` INT(11) NOT NULL DEFAULT '0' ,
	`deliver_address` VARCHAR(1000) NULL DEFAULT NULL ,
	`total_rating` FLOAT NOT NULL ,
	`review_count` INT(11) NOT NULL DEFAULT '0' ,
	`operation_hours` VARCHAR(300) NULL DEFAULT NULL,
	`total_order` INT(11) NULL DEFAULT '0',
	`store_status` CHAR(1) NOT NULL DEFAULT 'Y' ,
	`member_no` INT(11) NOT NULL,
	`category_code` INT(11) NOT NULL DEFAULT '0',
	PRIMARY KEY (`store_no`) USING BTREE,
	INDEX `FK_member_TO_stores_1` (`member_no`) USING BTREE,
	INDEX `FK_category_TO_stores` (`category_code`) USING BTREE,
	CONSTRAINT `FK_category_TO_stores` FOREIGN KEY (`category_code`) REFERENCES `category_type` (`category_code`) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT `FK_member_TO_stores_1` FOREIGN KEY (`member_no`) REFERENCES `member` (`member_no`) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT `CONSTRAINT_1` CHECK (`store_status` in ('Y','N')),
	CONSTRAINT `CONSTRAINT_2` CHECK (`store_status` in ('Y','N'))
);
```

### 3. ORDERS
```sql
CREATE TABLE orders (
	order_no INT(11) NOT NULL AUTO_INCREMENT,
	order_status VARCHAR(10) NOT NULL DEFAULT 'N',
	total_price INT(11) NOT NULL DEFAULT '0' ,
	member_no INT(11) NOT NULL ,
	store_no INT(11) NOT NULL ,
	cart_no INT(11) NOT NULL,
	PRIMARY KEY (order_no) USING BTREE,
	INDEX FK_member_TO_orders_1 (member_no) USING BTREE,
	INDEX FK_cart_TO_orders (cart_no) USING BTREE,
	INDEX FK_store_TO_orders_1 (store_no) USING BTREE,
	CONSTRAINT FK_cart_TO_orders FOREIGN KEY (cart_no) REFERENCES cart (cart_no) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT FK_member_TO_orders_1 FOREIGN KEY (member_no) REFERENCES member (member_no) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT FK_stores_TO_orders_1 FOREIGN KEY (store_no) REFERENCES stores (store_no) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT CONSTRAINT_1 CHECK (order_status in ('Y','N')),
	CONSTRAINT CONSTRAINT_2 CHECK (order_status in ('Y','N'))
);
```

</br>

## âœï¸ DML 
### 1. MEMBER
```sql
ì¼ë°˜ íšŒì›
INSERT INTO `member` 
( member_code, user_id, email, `password`, `name`, nickname,identity_no, phone, profile_img, address,manner_total_score)
VALUES( 
        '1',
        'choi123',
        'choi123@gmail.com',
	'choigun123',
	'ìµœê±´', 
	'ì ìˆ˜í•œ ì•…ì–´',
	'778872-1484893',
	'010-2222-3333',
	'C:\Users\Playdata\Documents\í”„ë¡œì íŠ¸4ì¡°\4ì¡° ì´ë¯¸ì§€ í´ë”\íšŒì› ì´ë¯¸ì§€.jpg',
	'ì„œìš¸íŠ¹ë³„ì‹œ ë™ì‘êµ¬ ì—¬ì˜ëŒ€ë°©ë¡œ36ê¸¸ 36-1',
	0
);

ê°€ê²Œìš© íšŒì›
INSERT INTO `member`
( member_code, user_id, email, `password`, `name`, nickname,identity_no, phone, profile_img, address,manner_total_score)
VALUES(
	'2',
	'jang0312',
	'jang0312@gmail.com',
	'janggun0312',
	'ì¥ê±´',
	'ë¡œì»¬ ë²„ë“œ',
	'899003-2484773',
	'010-2222-9969',
	'C:\Users\Playdata\Documents\í”„ë¡œì íŠ¸4ì¡°\4ì¡° ì´ë¯¸ì§€ í´ë”\ê°€ê²Œ í”„ë¡œí•„ ì´ë¯¸ì§€.jpg',
	'ì„œìš¸íŠ¹ë³„ì‹œ ë™ì‘êµ¬ ì‹ ëŒ€ë°©ê¸¸ 80',
	0
);


ê´€ë¦¬ì íšŒì›
INSERT INTO `member`
( member_code, user_id, email, `password`, `name`, nickname,identity_no, phone, profile_img, address,manner_total_score)
VALUES(
	'3',
	'dong123',
	'dong123@gmail.com',
	'donggun123',
	'ë™ê±´',
	'ë¡œì»¬ íœ´ë¨¼',
	'779003-2484663',
	'010-2222-9969',
	'C:\Users\Playdata\Documents\í”„ë¡œì íŠ¸4ì¡°\4ì¡° ì´ë¯¸ì§€ í´ë”\ê´€ë¦¬ì í”„ë¡œí•„ ì´ë¯¸ì§€.jpg',
	'ì„œìš¸íŠ¹ë³„ì‹œ ë™ì‘êµ¬ ì‹ ëŒ€ë°©1ë‹¤ê¸¸ 24',
	0
);

```

### 2. MENU
```sql
INSERT INTO `menu`
( menu_name, menu_price, menu_content, menu_img_url, store_no )
VALUES (
	'í† ë§ˆí†  í”¼ì',
	21000,
	'ë‚©ì‘í•œ ë°˜ì£½ì— í† ë§ˆí†  ì†ŒìŠ¤ì™€ ì¹˜ì¦ˆ ë“± í† í•‘ì„ ì–¹ì–´ì„œ êµ¬ì›Œë‚¸ í† ë§ˆí† í”¼ì',
	"C:\Users\g\Documents\1ì°¨ í”„ë¡œì íŠ¸\ë©”ë‰´ ì´ë¯¸ì§€\pizza.webp",
	1	
);

```

### 3. STORES
```sql
INSERT INTO `stores`
(store_name, store_address, phone, store_info, store_img, min_delivery_price,
delivery_charge, total_rating, review_count, store_status, member_no, category_code)
VALUES(
	'í™í‚ë°˜ì ',
	'ì„œìš¸íŠ¹ë³„ì‹œ ë™ì‘êµ¬ ë³´ë¼ë§¤ë¡œ',
	'02-421-1516',
	'ë‘˜ì´ ë¨¹ë‹¤ í•˜ë‚˜ê°€ ì£½ì–´ë„ ëª¨ë¥´ëŠ” ë§›ì§‘',
	'C:\Users\Playdata\Documents\í”„ë¡œì íŠ¸4ì¡°\4ì¡° ì´ë¯¸ì§€ í´ë”\í™í‚ë°˜ì .jpg'
	15000,
	6000,
	4.2,
	12,
	'Y',
	5,
	2
);
```
</br>

## ğŸ§· í”„ë¡œì‹œì €ì™€ íŠ¸ë¦¬ê±°

### PROCEDURE  

```sql
DELIMITER $$
CREATE OR REPLACE PROCEDURE chatRoomEnter(
	IN enterChatRoomNum INT,
	IN enterMemberNum INT
)
BEGIN
	DECLARE chatRoomCurrentNum INT;
	DECLARE chatRoomMaxNum INT;
	
	SET chatRoomCurrentNum = 
		(SELECT current_people_num
		FROM chat_room
		WHERE chat_room_no = enterChatRoomNum
		)
		;
	SET chatRoomMaxNum = 
		(SELECT max_people_num
		FROM chat_room
		WHERE chat_room_no = enterChatRoomNum
		)
		;
	IF 
		chatRoomCurrentNum < chatRoomMaxNum
	THEN 
		INSERT INTO `groups`(chat_room_no, member_no)
		VALUES (enterChatRoomNum, enterMemberNum)
		;
		UPDATE chat_room
      SET current_people_num = current_people_num + 1
      WHERE chat_room_no = enterChatRoomNum
		;
	END IF;
END$$
DELIMITER ;

```

```sql
DELIMITER $$
CREATE OR REPLACE PROCEDURE insertMannerLevel(
    IN p_manner_score TINYINT,
    IN p_evaluatee_no INT,
    IN p_evaluator_no INT
)
BEGIN
    INSERT INTO manner_level (manner_score, evaluatee_no, evaluator_no)
    VALUES (p_manner_score, p_evaluatee_no, p_evaluator_no)
	 ;
END$$
DELIMITER ;
```
```sql
DELIMITER $$
CREATE PROCEDURE CreatePersonalCart(
    IN p_member_no INT,
    IN p_menu_name VARCHAR(255),
    IN p_quantity INT,
    IN p_cart_no INT
)
BEGIN
    INSERT INTO personal_cart (total_cart_num,
                               store_no,
                               menu_no,
                               member_no,
                               cart_no,
                               total_cart_price)
    SELECT
        p_quantity
        m.store_no, 
        m.menu_no, 
        p_member_no
        p_cart_no
        p_quantity * m.menu_price
    FROM menu m
    WHERE m.menu_name = p_menu_name;
END$$
DELIMITER ;

```
```sql
DELIMITER $$

CREATE PROCEDURE InsertChatRoom(
    IN chat_name VARCHAR(255), 
    IN address VARCHAR(255), 
    IN max_people_num INT, 
    IN store_no INT
)
BEGIN
    INSERT INTO chat_room (chat_name, address, max_people_num, store_no)
    VALUES (chat_name, address, max_people_num, store_no);
END$$

DELIMITER ;
```

### TRIGGER
```sql
DELIMITER $$

CREATE OR REPLACE TRIGGER updateMemberAfterMannerInsert
AFTER INSERT ON manner_level
FOR EACH ROW
BEGIN
    UPDATE `member`
    SET manner_total_score = manner_total_score + NEW.manner_score
    WHERE member_no = NEW.evaluatee_no;
END$$

DELIMITER ;
```

```sql
DELIMITER $$

CREATE OR REPLACE TRIGGER afterChatRoomInsert
AFTER INSERT ON chat_room
FOR EACH ROW
BEGIN
    INSERT INTO cart(chat_room_no) VALUES (NEW.chat_room_no);
END$$

DELIMITER ;
```
